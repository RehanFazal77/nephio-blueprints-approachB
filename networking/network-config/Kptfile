apiVersion: kpt.dev/v1
kind: Kptfile
metadata:
  name: network-config
  annotations:
    config.kubernetes.io/local-config: "true"
info:
  description: |
    Network Attachment Definitions for 5G workloads.
    Deployed directly by ConfigSync - no nad-fn needed.
    Namespaces are defined in cluster-baseline - NOT here.
  keywords:
    - nephio
    - networking
    - nad
    - multus
    - 5g

pipeline:
  mutators:
    - image: gcr.io/kpt-fn/apply-setters:v0.2
      configMap:
        # Target namespace for NADs (must already exist in cluster-baseline)
        target-namespace: openairinterface

        # Physical interface on worker nodes
        master-interface: eth0

        # N2 Network (gNB <-> AMF signaling)
        n2-subnet: "192.168.10.0/24"
        n2-gateway: "192.168.10.1"
        n2-range-start: "192.168.10.10"
        n2-range-end: "192.168.10.250"

        # N3 Network (gNB <-> UPF user plane)
        n3-subnet: "192.168.11.0/24"
        n3-gateway: "192.168.11.1"
        n3-range-start: "192.168.11.10"
        n3-range-end: "192.168.11.250"

        # N4 Network (SMF <-> UPF control)
        n4-subnet: "192.168.12.0/24"
        n4-gateway: "192.168.12.1"
        n4-range-start: "192.168.12.10"
        n4-range-end: "192.168.12.250"

        # N6 Network (UPF <-> Data Network)
        n6-subnet: "192.168.13.0/24"
        n6-gateway: "192.168.13.1"
        n6-range-start: "192.168.13.10"
        n6-range-end: "192.168.13.250"
